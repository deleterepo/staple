{"ast":null,"code":"import _slicedToArray from \"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js\";\nimport React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl, Grid, Row, Col, ListGroupItem, PageHeader, ListGroup } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archives.css\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nexport default function Archives(props) {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        content = _useState2[0],\n        setContent = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        staple = _useState4[0],\n        setStaple = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        staples = _useState6[0],\n        setStaples = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isDeleting = _useState8[0],\n        setIsDeleting = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isLoading = _useState10[0],\n        setIsLoading = _useState10[1];\n\n  useEffect(() => {\n    async function onLoad() {\n      setIsLoading(true);\n\n      try {\n        fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => {\n          if (data.staple) {\n            setContent(data.staple.content);\n            setStaple(data.staple);\n          } else {\n            alert(`Staple with id ${props.match.params.id} not found!`);\n          }\n        }).catch(e => alert(e.message));\n\n        try {\n          fetch(config.HOST + \"/rest/api/1/staple\", {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': 'Bearer ' + Cookie.get('token')\n            }\n          }).then(response => response.json()).then(data => setStaples(data)).catch(e => alert(e.message));\n        } catch (e) {\n          alert(e);\n        }\n      } catch (e) {\n        alert(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function fetchStaple(id) {}\n\n  function renderArchiveView(astaples) {\n    let list = undefined;\n\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return React.createElement(LinkContainer, {\n          onClick: fetchStaple(staple.id),\n          key: staple.id,\n          to: `/staples/${staple.id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(ListGroupItem, {\n          header: staple.name,\n          key: staple.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Created: \" + new Date(staple.created_at).toLocaleString()));\n      });\n    }\n\n    let s = undefined;\n\n    if (staple.staple) {\n      s = React.createElement(\"div\", {\n        className: \"Staples\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"content\",\n        className: \"staple-view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"pre\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, staple.staple.content)), React.createElement(LoaderButton, {\n        block: true,\n        bsSize: \"large\",\n        bsStyle: \"danger\",\n        onClick: event => handleDelete(event, staple.staple.id),\n        isLoading: isDeleting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Delete\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"show-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      md: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, s), React.createElement(Col, {\n      xs: 6,\n      md: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, list))));\n  }\n\n  function renderArchives() {\n    return React.createElement(\"div\", {\n      className: \"staples\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(PageHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Your Archived Staples\"), React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, !isLoading && renderArchiveView(staples)));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Staples\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, renderArchives());\n}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js"],"names":["React","useState","useEffect","config","Cookie","FormGroup","FormControl","Grid","Row","Col","ListGroupItem","PageHeader","ListGroup","LoaderButton","LinkContainer","Archives","props","content","setContent","staple","setStaple","staples","setStaples","isDeleting","setIsDeleting","isLoading","setIsLoading","onLoad","fetch","HOST","match","params","id","method","headers","get","then","response","json","data","alert","catch","e","message","handleDelete","event","preventDefault","ok","history","push","fetchStaple","renderArchiveView","astaples","list","undefined","map","name","Date","created_at","toLocaleString","s","renderArchives"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport {FormGroup, FormControl, Grid, Row, Col, ListGroupItem, PageHeader, ListGroup} from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archives.css\";\nimport {LinkContainer} from \"react-router-bootstrap\";\n\nexport default function Archives(props) {\n  const [content, setContent] = useState(\"\");\n  const [staple, setStaple] = useState({});\n  const [staples, setStaples] = useState([]);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    async function onLoad() {\n      setIsLoading(true);\n      try {\n        fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => {\n            if (data.staple) {\n              setContent(data.staple.content);\n              setStaple(data.staple);\n            } else {\n              alert(`Staple with id ${props.match.params.id} not found!`);\n            }\n          })\n          .catch(e => alert(e.message));\n\n        try {\n          fetch(config.HOST+\"/rest/api/1/staple\", {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': 'Bearer ' + Cookie.get('token'),\n            },\n          }).then(response => response.json())\n            .then(data => setStaples(data))\n            .catch(e => alert(e.message));\n        } catch (e) {\n          alert(e);\n        }\n      } catch (e) {\n        alert(e);\n      }\n      setIsLoading(false);\n    }\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function fetchStaple(id) {\n\n  }\n\n  function renderArchiveView(astaples) {\n    let list = undefined;\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return (<LinkContainer onClick={fetchStaple(staple.id)} key={staple.id} to={`/staples/${staple.id}`}>\n          <ListGroupItem header={staple.name} key={staple.id}>\n            {\"Created: \" + new Date(staple.created_at).toLocaleString()}\n          </ListGroupItem>\n        </LinkContainer>)\n      })\n    }\n    let s = undefined;\n    if (staple.staple) {\n      s = (\n        <div className=\"Staples\">\n          <form>\n            <FormGroup controlId=\"content\" className=\"staple-view\">\n              <pre>{staple.staple.content}</pre>\n            </FormGroup>\n            <LoaderButton\n              block\n              bsSize=\"large\"\n              bsStyle=\"danger\"\n              onClick={(event) => handleDelete(event, staple.staple.id)}\n              isLoading={isDeleting}\n            >\n              Delete\n            </LoaderButton>\n          </form>\n          <br/>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <Grid>\n          <Row className=\"show-grid\">\n            <Col xs={12} md={8}>\n              {s}\n            </Col>\n            <Col xs={6} md={4}>\n              {list}\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    )\n  }\n\n  function renderArchives() {\n    return (\n      <div className=\"staples\">\n        <PageHeader>Your Archived Staples</PageHeader>\n        <ListGroup>\n          {!isLoading && renderArchiveView(staples)}\n        </ListGroup>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Staples\">\n      {renderArchives()}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}