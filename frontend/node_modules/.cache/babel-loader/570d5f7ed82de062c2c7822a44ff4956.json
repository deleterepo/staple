{"ast":null,"code":"import _slicedToArray from \"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/skarlso/goprojects/staple/frontend/src/containers/Staples.js\";\nimport React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Staples.css\";\nexport default function Staples(props) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        staple = _useState2[0],\n        setStaple = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        content = _useState4[0],\n        setContent = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isLoading = _useState6[0],\n        setIsLoading = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isDeleting = _useState8[0],\n        setIsDeleting = _useState8[1];\n\n  useEffect(() => {\n    async function onLoad() {\n      try {\n        fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => {\n          if (data.staple) {\n            setContent(data.staple.content);\n            setStaple(data.staple);\n          } else {\n            alert(`Staple with id ${props.match.params.id} not found!`);\n          }\n        }).catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n    }\n\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleArchive(event) {\n    setIsLoading(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}/archive`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsLoading(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Staples\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, staple && React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(FormGroup, {\n    controlId: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(FormControl // plaintext={content}\n  , {\n    componentClass: \"textarea\",\n    plaintext: content,\n    defaultValue: content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  })), React.createElement(LoaderButton, {\n    block: true,\n    bsSize: \"large\",\n    bsStyle: \"warning\",\n    onClick: handleArchive,\n    isLoading: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Archive\"), React.createElement(LoaderButton, {\n    block: true,\n    bsSize: \"large\",\n    bsStyle: \"danger\",\n    onClick: handleDelete,\n    isLoading: isDeleting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Delete\")));\n}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/Staples.js"],"names":["React","useState","useEffect","config","Cookie","FormGroup","FormControl","LoaderButton","Staples","props","staple","setStaple","content","setContent","isLoading","setIsLoading","isDeleting","setIsDeleting","onLoad","fetch","HOST","match","params","id","method","headers","get","then","response","json","data","alert","catch","e","message","handleArchive","event","preventDefault","ok","history","push","handleDelete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Staples.css\";\n\nexport default function Staples(props) {\n  const [staple, setStaple] = useState(null);\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  useEffect(() => {\n    async function onLoad() {\n      try {\n        fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => {\n            if (data.staple) {\n              setContent(data.staple.content);\n              setStaple(data.staple);\n            } else {\n              alert(`Staple with id ${props.match.params.id} not found!`);\n            }\n          })\n          .catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n    }\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleArchive(event) {\n    setIsLoading(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}/archive`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsLoading(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  return (\n    <div className=\"Staples\">\n      {staple && (\n        <form>\n          <FormGroup controlId=\"content\">\n            <FormControl\n              // plaintext={content}\n              componentClass=\"textarea\"\n              plaintext={content}\n              defaultValue={content}\n            />\n          </FormGroup>\n          <LoaderButton\n            block\n            bsSize=\"large\"\n            bsStyle=\"warning\"\n            onClick={handleArchive}\n            isLoading={isLoading}\n          >\n            Archive\n          </LoaderButton>\n          <LoaderButton\n            block\n            bsSize=\"large\"\n            bsStyle=\"danger\"\n            onClick={handleDelete}\n            isLoading={isDeleting}\n          >\n            Delete\n          </LoaderButton>\n        </form>\n      )}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}