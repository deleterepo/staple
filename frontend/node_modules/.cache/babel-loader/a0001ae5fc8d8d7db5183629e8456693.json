{"ast":null,"code":"import _slicedToArray from \"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/skarlso/goprojects/staple/frontend/src/containers/Home.js\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { Col, FormGroup, Grid, ListGroup, ListGroupItem, PageHeader, Row } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport \"./Home.css\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport LoaderButton from \"../components/LoaderButton\";\nexport default function Home(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        staples = _useState2[0],\n        setStaples = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        nextStaple = _useState4[0],\n        setNextStaple = _useState4[1];\n\n  const _useState5 = useState(true),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isLoading = _useState6[0],\n        setIsLoading = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isArchiving = _useState8[0],\n        setIsArchiving = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isDeleting = _useState10[0],\n        setIsDeleting = _useState10[1];\n\n  function handleArchive(event, id) {\n    setIsLoading(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${id}/archive`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsArchiving(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function handleDelete(event, id) {\n    setIsDeleting(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function renderStapleView(astaples) {\n    let list = undefined;\n\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return React.createElement(LinkContainer, {\n          key: staple.id,\n          to: `/staples/${staple.id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(ListGroupItem, {\n          header: staple.name,\n          key: staple.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, \"Created: \" + new Date(staple.created_at).toLocaleString()));\n      });\n    }\n\n    let s = undefined;\n\n    if (nextStaple.staple) {\n      s = React.createElement(\"div\", {\n        className: \"Staples\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"content\",\n        className: \"staple-view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, nextStaple.staple.content)), React.createElement(LoaderButton, {\n        block: true,\n        bsSize: \"large\",\n        bsStyle: \"warning\",\n        onClick: event => handleArchive(event, nextStaple.staple.id),\n        isLoading: isArchiving,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Archive\"), React.createElement(LoaderButton, {\n        block: true,\n        bsSize: \"large\",\n        bsStyle: \"danger\",\n        onClick: event => handleDelete(event, nextStaple.staple.id),\n        isLoading: isDeleting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Delete\")));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"show-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      md: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, s), React.createElement(Col, {\n      xs: 6,\n      md: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, list))), React.createElement(LinkContainer, {\n      key: \"new\",\n      to: \"/staples/new\",\n      className: \"create-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\uFF0B\"), \" Create a new staple\"))));\n  }\n\n  function renderLander() {\n    return React.createElement(\"div\", {\n      className: \"lander\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Staple\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"A stack based bookmark.\"));\n  }\n\n  function renderStaples() {\n    return React.createElement(\"div\", {\n      className: \"staples\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(PageHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Your Staples\"), React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, !isLoading && renderStapleView(staples)));\n  }\n\n  useEffect(() => {\n    async function onLoad() {\n      if (!props.isAuthenticated) {\n        return;\n      }\n\n      try {\n        fetch(config.HOST + \"/rest/api/1/staple\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => setStaples(data)).catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n\n      try {\n        fetch(config.HOST + \"/rest/api/1/staple/next\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => setNextStaple(data)).catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [props.isAuthenticated, isLoading, isDeleting]);\n  return React.createElement(\"div\", {\n    className: \"Home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, props.isAuthenticated ? renderStaples() : renderLander());\n}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/Home.js"],"names":["React","Fragment","useEffect","useState","Col","FormGroup","Grid","ListGroup","ListGroupItem","PageHeader","Row","LinkContainer","config","Cookie","LoaderButton","Home","props","staples","setStaples","nextStaple","setNextStaple","isLoading","setIsLoading","isArchiving","setIsArchiving","isDeleting","setIsDeleting","handleArchive","event","id","preventDefault","fetch","HOST","method","headers","get","then","response","ok","history","push","catch","e","alert","message","handleDelete","renderStapleView","astaples","list","undefined","map","staple","name","Date","created_at","toLocaleString","s","content","renderLander","renderStaples","onLoad","isAuthenticated","json","data"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,QAApC,QAAmD,OAAnD;AACA,SAAQC,GAAR,EAAaC,SAAb,EAAwBC,IAAxB,EAA8BC,SAA9B,EAAyCC,aAAzC,EAAwDC,UAAxD,EAAoEC,GAApE,QAA8E,iBAA9E;AACA,SAAQC,aAAR,QAA4B,wBAA5B;AACA,OAAO,YAAP;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AAEA,eAAe,SAASC,IAAT,CAAcC,KAAd,EAAqB;AAAA,oBACJb,QAAQ,CAAC,EAAD,CADJ;AAAA;AAAA,QAC3Bc,OAD2B;AAAA,QAClBC,UADkB;;AAAA,qBAEEf,QAAQ,CAAC,EAAD,CAFV;AAAA;AAAA,QAE3BgB,UAF2B;AAAA,QAEfC,aAFe;;AAAA,qBAGAjB,QAAQ,CAAC,IAAD,CAHR;AAAA;AAAA,QAG3BkB,SAH2B;AAAA,QAGhBC,YAHgB;;AAAA,qBAIInB,QAAQ,CAAC,KAAD,CAJZ;AAAA;AAAA,QAI3BoB,WAJ2B;AAAA,QAIdC,cAJc;;AAAA,qBAKErB,QAAQ,CAAC,KAAD,CALV;AAAA;AAAA,QAK3BsB,UAL2B;AAAA,QAKfC,aALe;;AAOlC,WAASC,aAAT,CAAuBC,KAAvB,EAA8BC,EAA9B,EAAkC;AAChCP,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAM,IAAAA,KAAK,CAACE,cAAN;;AACA,QAAI;AACFC,MAAAA,KAAK,CAACnB,MAAM,CAACoB,IAAP,GAAa,sBAAqBH,EAAG,UAAtC,EAAiD;AACpDI,QAAAA,MAAM,EAAE,MAD4C;AAEpDC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,2BAAiB,YAAYrB,MAAM,CAACsB,GAAP,CAAW,OAAX;AAFtB;AAF2C,OAAjD,CAAL,CAMGC,IANH,CAMQC,QAAQ,IAAI;AAClB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACfd,UAAAA,cAAc,CAAC,KAAD,CAAd;AACAR,UAAAA,KAAK,CAACuB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;AACF,OAXD,EAWGC,KAXH,CAWSC,CAAC,IAAIC,KAAK,CAACD,CAAC,CAACE,OAAH,CAXnB;AAYD,KAbD,CAaE,OAAOF,CAAP,EAAU;AACVC,MAAAA,KAAK,CAACD,CAAD,CAAL;AACD;AACF;;AAED,WAASG,YAAT,CAAsBjB,KAAtB,EAA6BC,EAA7B,EAAiC;AAC/BH,IAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,IAAAA,KAAK,CAACE,cAAN;;AACA,QAAI;AACFC,MAAAA,KAAK,CAACnB,MAAM,CAACoB,IAAP,GAAa,sBAAqBH,EAAG,EAAtC,EAAyC;AAC5CI,QAAAA,MAAM,EAAE,QADoC;AAE5CC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,2BAAiB,YAAYrB,MAAM,CAACsB,GAAP,CAAW,OAAX;AAFtB;AAFmC,OAAzC,CAAL,CAMGC,IANH,CAMQC,QAAQ,IAAI;AAClB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACfZ,UAAAA,aAAa,CAAC,KAAD,CAAb;AACAV,UAAAA,KAAK,CAACuB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;AACF,OAXD,EAWGC,KAXH,CAWSC,CAAC,IAAIC,KAAK,CAACD,CAAC,CAACE,OAAH,CAXnB;AAYD,KAbD,CAaE,OAAOF,CAAP,EAAU;AACVC,MAAAA,KAAK,CAACD,CAAD,CAAL;AACD;AACF;;AAED,WAASI,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,QAAIC,IAAI,GAAGC,SAAX;;AACA,QAAIF,QAAQ,CAAC9B,OAAb,EAAsB;AACpB+B,MAAAA,IAAI,GAAGD,QAAQ,CAAC9B,OAAT,CAAiBiC,GAAjB,CAAqBC,MAAM,IAAI;AACpC,eAAQ,oBAAC,aAAD;AAAe,UAAA,GAAG,EAAEA,MAAM,CAACtB,EAA3B;AAA+B,UAAA,EAAE,EAAG,YAAWsB,MAAM,CAACtB,EAAG,EAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACN,oBAAC,aAAD;AAAe,UAAA,MAAM,EAAEsB,MAAM,CAACC,IAA9B;AAAoC,UAAA,GAAG,EAAED,MAAM,CAACtB,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,cAAc,IAAIwB,IAAJ,CAASF,MAAM,CAACG,UAAhB,EAA4BC,cAA5B,EADjB,CADM,CAAR;AAKD,OANM,CAAP;AAOD;;AACD,QAAIC,CAAC,GAAGP,SAAR;;AACA,QAAI9B,UAAU,CAACgC,MAAf,EAAuB;AACrBK,MAAAA,CAAC,GACC;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,SAArB;AAA+B,QAAA,SAAS,EAAC,aAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAWrC,UAAU,CAACgC,MAAX,CAAkBM,OAA7B,CADF,CADF,EAIE,oBAAC,YAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,MAAM,EAAC,OAFT;AAGE,QAAA,OAAO,EAAC,SAHV;AAIE,QAAA,OAAO,EAAG7B,KAAD,IAAWD,aAAa,CAACC,KAAD,EAAQT,UAAU,CAACgC,MAAX,CAAkBtB,EAA1B,CAJnC;AAKE,QAAA,SAAS,EAAEN,WALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,EAaE,oBAAC,YAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,MAAM,EAAC,OAFT;AAGE,QAAA,OAAO,EAAC,QAHV;AAIE,QAAA,OAAO,EAAGK,KAAD,IAAWiB,YAAY,CAACjB,KAAD,EAAQT,UAAU,CAACgC,MAAX,CAAkBtB,EAA1B,CAJlC;AAKE,QAAA,SAAS,EAAEJ,UALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF,CADF,CADF;AA2BD;;AACD,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG+B,CADH,CADF,EAIE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAY,MAAA,EAAE,EAAE,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGR,IADH,CAJF,CADF,CADF,EAWE,oBAAC,aAAD;AAAe,MAAA,GAAG,EAAC,KAAnB;AAAyB,MAAA,EAAE,EAAC,cAA5B;AAA2C,MAAA,SAAS,EAAC,kBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,QAAJ,CADF,yBADF,CADF,CAXF,CADF;AAqBD;;AAED,WAASU,YAAT,GAAwB;AACtB,WACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF,CADF;AAMD;;AAED,WAASC,aAAT,GAAyB;AACvB,WACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACtC,SAAD,IAAcyB,gBAAgB,CAAC7B,OAAD,CADjC,CAFF,CADF;AAQD;;AAEDf,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAe0D,MAAf,GAAwB;AACtB,UAAI,CAAC5C,KAAK,CAAC6C,eAAX,EAA4B;AAC1B;AACD;;AAED,UAAI;AACF9B,QAAAA,KAAK,CAACnB,MAAM,CAACoB,IAAP,GAAY,oBAAb,EAAmC;AACtCC,UAAAA,MAAM,EAAE,KAD8B;AAEtCC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,6BAAiB,YAAYrB,MAAM,CAACsB,GAAP,CAAW,OAAX;AAFtB;AAF6B,SAAnC,CAAL,CAMGC,IANH,CAMQC,QAAQ,IAAIA,QAAQ,CAACyB,IAAT,EANpB,EAOG1B,IAPH,CAOQ2B,IAAI,IAAI7C,UAAU,CAAC6C,IAAD,CAP1B,EAQGtB,KARH,CAQSC,CAAC,IAAIC,KAAK,CAACD,CAAC,CAACE,OAAH,CARnB;AASD,OAVD,CAUE,OAAOF,CAAP,EAAU;AACVC,QAAAA,KAAK,CAACD,CAAD,CAAL;AACD;;AAED,UAAI;AACFX,QAAAA,KAAK,CAACnB,MAAM,CAACoB,IAAP,GAAY,yBAAb,EAAwC;AAC3CC,UAAAA,MAAM,EAAE,KADmC;AAE3CC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,6BAAiB,YAAYrB,MAAM,CAACsB,GAAP,CAAW,OAAX;AAFtB;AAFkC,SAAxC,CAAL,CAMGC,IANH,CAMQC,QAAQ,IAAIA,QAAQ,CAACyB,IAAT,EANpB,EAOG1B,IAPH,CAOQ2B,IAAI,IAAI3C,aAAa,CAAC2C,IAAD,CAP7B,EAQGtB,KARH,CAQSC,CAAC,IAAIC,KAAK,CAACD,CAAC,CAACE,OAAH,CARnB;AASD,OAVD,CAUE,OAAOF,CAAP,EAAU;AACVC,QAAAA,KAAK,CAACD,CAAD,CAAL;AACD;;AAEDpB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;;AAEDsC,IAAAA,MAAM;AACP,GAtCQ,EAsCN,CAAC5C,KAAK,CAAC6C,eAAP,EAAwBxC,SAAxB,EAAmCI,UAAnC,CAtCM,CAAT;AAwCA,SACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGT,KAAK,CAAC6C,eAAN,GAAwBF,aAAa,EAArC,GAA0CD,YAAY,EADzD,CADF;AAKD","sourcesContent":["import React, {Fragment, useEffect, useState} from \"react\";\nimport {Col, FormGroup, Grid, ListGroup, ListGroupItem, PageHeader, Row} from \"react-bootstrap\";\nimport {LinkContainer} from \"react-router-bootstrap\";\nimport \"./Home.css\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport LoaderButton from \"../components/LoaderButton\";\n\nexport default function Home(props) {\n  const [staples, setStaples] = useState([]);\n  const [nextStaple, setNextStaple] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [isArchiving, setIsArchiving] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  function handleArchive(event, id) {\n    setIsLoading(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${id}/archive`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsArchiving(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function handleDelete(event, id) {\n    setIsDeleting(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function renderStapleView(astaples) {\n    let list = undefined;\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return (<LinkContainer key={staple.id} to={`/staples/${staple.id}`}>\n          <ListGroupItem header={staple.name} key={staple.id}>\n            {\"Created: \" + new Date(staple.created_at).toLocaleString()}\n          </ListGroupItem>\n        </LinkContainer>)\n      })\n    }\n    let s = undefined;\n    if (nextStaple.staple) {\n      s = (\n        <div className=\"Staples\">\n          <form>\n            <FormGroup controlId=\"content\" className=\"staple-view\">\n              <Fragment>{nextStaple.staple.content}</Fragment>\n            </FormGroup>\n            <LoaderButton\n              block\n              bsSize=\"large\"\n              bsStyle=\"warning\"\n              onClick={(event) => handleArchive(event, nextStaple.staple.id)}\n              isLoading={isArchiving}\n            >\n              Archive\n            </LoaderButton>\n            <LoaderButton\n              block\n              bsSize=\"large\"\n              bsStyle=\"danger\"\n              onClick={(event) => handleDelete(event, nextStaple.staple.id)}\n              isLoading={isDeleting}\n            >\n              Delete\n            </LoaderButton>\n          </form>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <Grid>\n          <Row className=\"show-grid\">\n            <Col xs={12} md={8}>\n              {s}\n            </Col>\n            <Col xs={6} md={4}>\n              {list}\n            </Col>\n          </Row>\n        </Grid>\n        <LinkContainer key=\"new\" to=\"/staples/new\" className=\"create-container\">\n          <ListGroupItem>\n            <h4>\n              <b>{\"\\uFF0B\"}</b> Create a new staple\n            </h4>\n          </ListGroupItem>\n        </LinkContainer>\n      </div>\n    )\n  }\n\n  function renderLander() {\n    return (\n      <div className=\"lander\">\n        <h1>Staple</h1>\n        <p>A stack based bookmark.</p>\n      </div>\n    );\n  }\n\n  function renderStaples() {\n    return (\n      <div className=\"staples\">\n        <PageHeader>Your Staples</PageHeader>\n        <ListGroup>\n          {!isLoading && renderStapleView(staples)}\n        </ListGroup>\n      </div>\n    );\n  }\n\n  useEffect(() => {\n    async function onLoad() {\n      if (!props.isAuthenticated) {\n        return;\n      }\n\n      try {\n        fetch(config.HOST+\"/rest/api/1/staple\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => setStaples(data))\n          .catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n\n      try {\n        fetch(config.HOST+\"/rest/api/1/staple/next\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => setNextStaple(data))\n          .catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [props.isAuthenticated, isLoading, isDeleting]);\n\n  return (\n    <div className=\"Home\">\n      {props.isAuthenticated ? renderStaples() : renderLander()}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}