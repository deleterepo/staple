{"ast":null,"code":"import _regeneratorRuntime from\"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{FormGroup,FormControl}from\"react-bootstrap\";import LoaderButton from\"../components/LoaderButton\";import\"./AddStaple.css\";import config from\"../config\";import Cookie from\"js-cookie\";export default function AddStaple(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];function validateForm(){return content.length>0&&title.length>0;}function handleSubmit(event){return _regeneratorRuntime.async(function handleSubmit$(_context){while(1){switch(_context.prev=_context.next){case 0:// Call the api to create a staple.\nevent.preventDefault();setIsLoading(true);try{fetch(config.HOST+\"/rest/api/1/staple\",{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+Cookie.get(\"token\")},body:JSON.stringify({name:title,content:content})}).then(function(response){if(response.ok){setIsLoading(false);props.history.push(\"/\");}else{setIsLoading(false);alert(\"Not allowed to create more staples\");}}).catch(function(e){return alert(e.message);});}catch(e){alert(e);setIsLoading(false);}case 3:case\"end\":return _context.stop();}}});}return React.createElement(\"div\",{className:\"AddStaple\"},React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(FormGroup,{controlId:\"Title\"},React.createElement(FormControl,{type:\"text\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})),React.createElement(FormGroup,{controlId:\"content\"},React.createElement(FormControl,{value:content,componentClass:\"textarea\",onChange:function onChange(e){return setContent(e.target.value);}})),React.createElement(LoaderButton,{block:true,type:\"submit\",bsSize:\"large\",bsStyle:\"primary\",isLoading:isLoading,disabled:!validateForm()},\"Create\")));}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/AddStaple.js"],"names":["React","useState","FormGroup","FormControl","LoaderButton","config","Cookie","AddStaple","props","content","setContent","title","setTitle","isLoading","setIsLoading","validateForm","length","handleSubmit","event","preventDefault","fetch","HOST","method","headers","get","body","JSON","stringify","name","then","response","ok","history","push","alert","catch","e","message","target","value"],"mappings":"uTAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAO,iBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,cAAe,SAASC,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,eACTP,QAAQ,CAAC,EAAD,CADC,wCAChCQ,OADgC,eACvBC,UADuB,8BAEbT,QAAQ,CAAC,EAAD,CAFK,yCAEhCU,KAFgC,eAEzBC,QAFyB,8BAGLX,QAAQ,CAAC,KAAD,CAHH,yCAGhCY,SAHgC,eAGrBC,YAHqB,eAKvC,QAASC,CAAAA,YAAT,EAAwB,CACtB,MAAON,CAAAA,OAAO,CAACO,MAAR,CAAiB,CAAjB,EAAsBL,KAAK,CAACK,MAAN,CAAe,CAA5C,CACD,CAGD,QAAeC,CAAAA,YAAf,CAA4BC,KAA5B,wHACE;AACAA,KAAK,CAACC,cAAN,GACAL,YAAY,CAAC,IAAD,CAAZ,CACA,GAAI,CACFM,KAAK,CAACf,MAAM,CAACgB,IAAP,CAAY,oBAAb,CAAmC,CACtCC,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiB,UAAYjB,MAAM,CAACkB,GAAP,CAAW,OAAX,CAFtB,CAF6B,CAMtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAEjB,KADa,CAEnBF,OAAO,CAAEA,OAFU,CAAf,CANgC,CAAnC,CAAL,CAUGoB,IAVH,CAUQ,SAAAC,QAAQ,CAAI,CAClB,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACfjB,YAAY,CAAC,KAAD,CAAZ,CACAN,KAAK,CAACwB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACD,CAHD,IAGO,CACLnB,YAAY,CAAC,KAAD,CAAZ,CACAoB,KAAK,CAAC,oCAAD,CAAL,CACD,CACF,CAlBD,EAkBGC,KAlBH,CAkBS,SAAAC,CAAC,QAAIF,CAAAA,KAAK,CAACE,CAAC,CAACC,OAAH,CAAT,EAlBV,EAmBD,CAAC,MAAOD,CAAP,CAAU,CACVF,KAAK,CAACE,CAAD,CAAL,CACAtB,YAAY,CAAC,KAAD,CAAZ,CACD,CA3BH,8CA8BA,MACE,4BAAK,SAAS,CAAC,WAAf,EACE,4BAAM,QAAQ,CAAEG,YAAhB,EACE,oBAAC,SAAD,EAAW,SAAS,CAAC,OAArB,EACE,oBAAC,WAAD,EAAa,IAAI,CAAC,MAAlB,CAAyB,KAAK,CAAEN,KAAhC,CAAuC,QAAQ,CAAE,kBAAAyB,CAAC,QAAIxB,CAAAA,QAAQ,CAACwB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAZ,EAAlD,EADF,CADF,CAIE,oBAAC,SAAD,EAAW,SAAS,CAAC,SAArB,EACE,oBAAC,WAAD,EACE,KAAK,CAAE9B,OADT,CAEE,cAAc,CAAC,UAFjB,CAGE,QAAQ,CAAE,kBAAA2B,CAAC,QAAI1B,CAAAA,UAAU,CAAC0B,CAAC,CAACE,MAAF,CAASC,KAAV,CAAd,EAHb,EADF,CAJF,CAWE,oBAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,QAFP,CAGE,MAAM,CAAC,OAHT,CAIE,OAAO,CAAC,SAJV,CAKE,SAAS,CAAE1B,SALb,CAME,QAAQ,CAAE,CAACE,YAAY,EANzB,WAXF,CADF,CADF,CA0BD","sourcesContent":["import React, { useState } from \"react\";\nimport { FormGroup, FormControl } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./AddStaple.css\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\n\nexport default function AddStaple(props) {\n  const [content, setContent] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return content.length > 0 && title.length > 0;\n  }\n\n\n  async function handleSubmit(event) {\n    // Call the api to create a staple.\n    event.preventDefault();\n    setIsLoading(true);\n    try {\n      fetch(config.HOST+\"/rest/api/1/staple\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get(\"token\"),\n        },\n        body: JSON.stringify({\n          name: title,\n          content: content,\n        }),\n      }).then(response => {\n        if (response.ok) {\n          setIsLoading(false);\n          props.history.push(\"/\");\n        } else {\n          setIsLoading(false);\n          alert(\"Not allowed to create more staples\");\n        }\n      }).catch(e => alert(e.message))\n    } catch (e) {\n      alert(e);\n      setIsLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"AddStaple\">\n      <form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"Title\">\n          <FormControl type=\"text\" value={title} onChange={e => setTitle(e.target.value)}/>\n        </FormGroup>\n        <FormGroup controlId=\"content\">\n          <FormControl\n            value={content}\n            componentClass=\"textarea\"\n            onChange={e => setContent(e.target.value)}\n          />\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Create\n        </LoaderButton>\n      </form>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}