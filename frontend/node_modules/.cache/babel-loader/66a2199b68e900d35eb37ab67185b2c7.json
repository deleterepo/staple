{"ast":null,"code":"import _slicedToArray from \"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js\";\nimport React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl, Grid, Row, Col, ListGroupItem, PageHeader, ListGroup, Button } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archives.css\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nexport default function Archives(props) {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        staple = _useState2[0],\n        setStaple = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        staples = _useState4[0],\n        setStaples = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isDeleting = _useState6[0],\n        setIsDeleting = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isLoading = _useState8[0],\n        setIsLoading = _useState8[1];\n\n  useEffect(() => {\n    async function onLoad() {\n      setIsLoading(true);\n\n      try {\n        fetch(config.HOST + \"/rest/api/1/staple\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => setStaples(data)).catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(id) {\n    setIsDeleting(true);\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/archive');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    } finally {\n      setIsDeleting(false);\n    }\n  }\n\n  function fetchStaple(id) {\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => response.json()).then(data => setStaple(data)).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function renderArchiveView(astaples) {\n    let list = undefined;\n\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return React.createElement(\"div\", {\n          key: staple.id,\n          className: \"archive-list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          key: staple.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: () => fetchStaple(staple.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, staple.name), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), \"Created: \" + new Date(staple.created_at).toLocaleString()));\n      });\n    }\n\n    let s = undefined;\n\n    if (staple.staple) {\n      s = React.createElement(\"div\", {\n        className: \"Staples\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"content\",\n        className: \"staple-view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"pre\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, staple.staple.content)), React.createElement(LoaderButton, {\n        block: true,\n        bsSize: \"large\",\n        bsStyle: \"danger\",\n        onClick: () => handleDelete(staple.staple.id),\n        isLoading: isDeleting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Delete\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"show-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      md: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, s), React.createElement(Col, {\n      xs: 6,\n      md: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, list))));\n  }\n\n  function renderArchives() {\n    return React.createElement(\"div\", {\n      className: \"staples\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(PageHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Your Archived Staples\"), React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, !isLoading && renderArchiveView(staples)));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Staples\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, renderArchives());\n}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js"],"names":["React","useState","useEffect","config","Cookie","FormGroup","FormControl","Grid","Row","Col","ListGroupItem","PageHeader","ListGroup","Button","LoaderButton","LinkContainer","Archives","props","staple","setStaple","staples","setStaples","isDeleting","setIsDeleting","isLoading","setIsLoading","onLoad","fetch","HOST","method","headers","get","then","response","json","data","catch","e","alert","message","match","params","id","handleDelete","ok","history","push","fetchStaple","renderArchiveView","astaples","list","undefined","map","name","Date","created_at","toLocaleString","s","content","renderArchives"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport {FormGroup, FormControl, Grid, Row, Col, ListGroupItem, PageHeader, ListGroup, Button} from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archives.css\";\nimport {LinkContainer} from \"react-router-bootstrap\";\n\nexport default function Archives(props) {\n  const [staple, setStaple] = useState({});\n  const [staples, setStaples] = useState([]);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    async function onLoad() {\n      setIsLoading(true);\n      try {\n        fetch(config.HOST+\"/rest/api/1/staple\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => setStaples(data))\n          .catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n      setIsLoading(false);\n    }\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(id) {\n    setIsDeleting(true);\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/archive');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    } finally {\n      setIsDeleting(false);\n    }\n  }\n\n  function fetchStaple(id) {\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => response.json())\n        .then(data => setStaple(data))\n        .catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  function renderArchiveView(astaples) {\n    let list = undefined;\n    if (astaples.staples) {\n      list = astaples.staples.map(staple => {\n        return (<div key={staple.id} className=\"archive-list\">\n          <div key={staple.id}>\n            <a onClick={() => fetchStaple(staple.id)} >{staple.name}</a><br/>\n            {\"Created: \" + new Date(staple.created_at).toLocaleString()}\n          </div>\n        </div>)\n      })\n    }\n    let s = undefined;\n    if (staple.staple) {\n      s = (\n        <div className=\"Staples\">\n          <form>\n            <FormGroup controlId=\"content\" className=\"staple-view\">\n              <pre>{staple.staple.content}</pre>\n            </FormGroup>\n            <LoaderButton\n              block\n              bsSize=\"large\"\n              bsStyle=\"danger\"\n              onClick={() => handleDelete(staple.staple.id)}\n              isLoading={isDeleting}\n            >\n              Delete\n            </LoaderButton>\n          </form>\n          <br/>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <Grid>\n          <Row className=\"show-grid\">\n            <Col xs={12} md={8}>\n              {s}\n            </Col>\n            <Col xs={6} md={4}>\n              {list}\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    )\n  }\n\n  function renderArchives() {\n    return (\n      <div className=\"staples\">\n        <PageHeader>Your Archived Staples</PageHeader>\n        <ListGroup>\n          {!isLoading && renderArchiveView(staples)}\n        </ListGroup>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Staples\">\n      {renderArchives()}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}