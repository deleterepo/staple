{"ast":null,"code":"import _slicedToArray from \"/Users/skarlso/goprojects/staple/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js\";\nimport React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archive.css\";\nexport default function Archives(props) {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        content = _useState2[0],\n        setContent = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        staple = _useState4[0],\n        setStaple = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isDeleting = _useState6[0],\n        setIsDeleting = _useState6[1];\n\n  useEffect(() => {\n    async function onLoad() {\n      try {\n        fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token')\n          }\n        }).then(response => response.json()).then(data => {\n          if (data.staple) {\n            setContent(data.staple.content);\n            setStaple(data.staple);\n          } else {\n            alert(`Staple with id ${props.match.params.id} not found!`);\n          }\n        }).catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n    }\n\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n\n    try {\n      fetch(config.HOST + `/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token')\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/');\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Staples\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, staple && React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(FormGroup, {\n    controlId: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(FormControl // plaintext={content}\n  , {\n    componentClass: \"textarea\",\n    plaintext: content,\n    defaultValue: content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), React.createElement(LoaderButton, {\n    block: true,\n    bsSize: \"large\",\n    bsStyle: \"danger\",\n    onClick: handleDelete,\n    isLoading: isDeleting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Delete\")));\n}","map":{"version":3,"sources":["/Users/skarlso/goprojects/staple/frontend/src/containers/Archives.js"],"names":["React","useState","useEffect","config","Cookie","FormGroup","FormControl","LoaderButton","Archives","props","content","setContent","staple","setStaple","isDeleting","setIsDeleting","onLoad","fetch","HOST","match","params","id","method","headers","get","then","response","json","data","alert","catch","e","message","handleDelete","event","preventDefault","ok","history","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport config from \"../config\";\nimport Cookie from \"js-cookie\";\nimport { FormGroup, FormControl } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport \"./Archive.css\";\n\nexport default function Archives(props) {\n  const [content, setContent] = useState(\"\");\n  const [staple, setStaple] = useState({});\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  useEffect(() => {\n    async function onLoad() {\n      try {\n        fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + Cookie.get('token'),\n          },\n        }).then(response => response.json())\n          .then(data => {\n            if (data.staple) {\n              setContent(data.staple.content);\n              setStaple(data.staple);\n            } else {\n              alert(`Staple with id ${props.match.params.id} not found!`);\n            }\n          })\n          .catch(e => alert(e.message));\n      } catch (e) {\n        alert(e);\n      }\n    }\n    onLoad();\n  }, [props.match.params.id]);\n\n  async function handleDelete(event) {\n    setIsDeleting(true);\n    event.preventDefault();\n    try {\n      fetch(config.HOST+`/rest/api/1/staple/${props.match.params.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + Cookie.get('token'),\n        },\n      }).then(response => {\n        if (response.ok) {\n          setIsDeleting(false);\n          props.history.push('/')\n        }\n      }).catch(e => alert(e.message));\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  return (\n    <div className=\"Staples\">\n      {staple && (\n        <form>\n          <FormGroup controlId=\"content\">\n            <FormControl\n              // plaintext={content}\n              componentClass=\"textarea\"\n              plaintext={content}\n              defaultValue={content}\n            />\n          </FormGroup>\n          <LoaderButton\n            block\n            bsSize=\"large\"\n            bsStyle=\"danger\"\n            onClick={handleDelete}\n            isLoading={isDeleting}\n          >\n            Delete\n          </LoaderButton>\n        </form>\n      )}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}